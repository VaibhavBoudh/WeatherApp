import React, { useState } from 'react';
import './App.css';
import logo from './logo.svg';
import background from './images/background.jpg';

function App() {
  const [location, setLocation] = useState('');
  const [weather, setWeather] = useState(null);
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState('');

  const fetchWeather = async () => {
    setLoading(true);
    setError('');
    try {
      // Replace with your API call
      const response = await fetch(`https://api.weatherapi.com/v1/current.json?key=YOUR_API_KEY&q=${location}`);
      const data = await response.json();
      if (data.error) {
        setError(data.error.message);
        setWeather(null);
      } else {
        setWeather(data);
      }
    } catch (err) {
      setError('Failed to fetch weather.');
      setWeather(null);
    }
    setLoading(false);
  };

  return (
    <div
      className="app-container"
      style={{
        backgroundImage: `url(${background})`,
        minHeight: '100vh',
        backgroundSize: 'cover',
        backgroundPosition: 'center',
      }}
    >
      <header className="header-bar">
        <img src={logo} alt="WeatherApp Logo" className="logo" />
        <h1>WeatherApp</h1>
      </header>
      <main className="main-content">
        <div className="search-card">
          <input
            type="text"
            placeholder="Enter city..."
            value={location}
            onChange={e => setLocation(e.target.value)}
            className="search-input"
          />
          <button onClick={fetchWeather} className="search-btn">
            üîç
          </button>
        </div>
        {loading && <div className="loader">Loading...</div>}
        {error && <div className="error-alert">{error}</div>}
        {weather && (
          <div className="weather-card">
            <h2>{weather.location.name}, {weather.location.country}</h2>
            <p>{weather.current.condition.text}</p>
            <p>Temperature: {weather.current.temp_c}¬∞C</p>
            <img src={weather.current.condition.icon} alt="Weather Icon" />
          </div>
        )}
      </main>
      <footer className="footer">
        <p>¬© 2025 WeatherApp | Data by WeatherAPI.com</p>
      </footer>
    </div>
  );
}

export default App;